<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Custom DataTables Example</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables CSS (Bootstrap 5 integration) -->
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  
  <style>
    .dataTables_length {
      position: absolute;
      left: 0;
    }
    .dataTables_info {
      position: absolute;
      left: 0;
      bottom: 0;
    }
    div.dataTables_paginate {
      justify-content: center !important;
    }
    .custom-top-bar {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .tab-content {
      margin-top: 2rem;
    }
  </style>
</head>
<body>
<div class="container py-4">

  <!-- Tab navigation -->
  <ul class="nav nav-tabs" id="datatableTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">
        Table 1
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">
        Table 2
      </button>
    </li>
  </ul>

  <!-- Table Contents -->
  <div class="tab-content" id="datatableTabsContent">
    <div class="tab-pane fade show active" id="tab1" role="tabpanel">
      <div class="custom-top-bar" id="custom-paginate-1"></div>
      <table id="datatable1" class="table table-striped table-bordered" style="width:100%"></table>
    </div>
    <div class="tab-pane fade" id="tab2" role="tabpanel">
      <div class="custom-top-bar" id="custom-paginate-2"></div>
      <table id="datatable2" class="table table-striped table-bordered" style="width:100%"></table>
    </div>
  </div>

</div>

<!-- Bootstrap 5 JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<!-- DataTables JS (Bootstrap 5 integration) -->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<!-- DataTables Buttons Extension for Show/Hide Columns -->
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.bootstrap5.min.css">

<script>
const columns = [
  { title: "ID", data: "id" },
  { title: "Name", data: "name" },
  { title: "Age", data: "age" },
  { title: "Email", data: "email" },
  { title: "Country", data: "country" },
  { title: "Nationality", data: "nationality" },
  { title: "Status", data: "status" },
  { 
    title: "Actions",
    data: null,
    orderable: false,
    render: function (data, type, row, meta) {
      return '<button class="btn btn-danger btn-sm delete-row">Delete</button>';
    }
  }
];

const ajaxData = "https://cdn.datatables.net/plug-ins/1.13.6/data/objects.txt"; // Use a public test source; replace as needed.

function initTable(tableId, paginateSelector) {
  const table = $('#' + tableId).DataTable({
    ajax: ajaxData,
    columns: columns,
    dom: 'lBtip',
    orderCellsTop: true,
    responsive: true,
    pagingType: "simple_numbers",
    buttons: [
      {
        extend: 'colvis',
        columns: ':not(:last-child)',
        className: 'btn btn-secondary btn-sm'
      }
    ],
    columnDefs: [
      { targets: -1, orderable: false }
    ],
    lengthMenu: [5, 10, 25, 50],
    pageLength: 5,
    initComplete: function () {
      // Set up column search
      let api = this.api();
      if (!$(this.table().footer()).length) {
        $(this.table().header()).after('<tfoot><tr></tr></tfoot>');
      }
      api.columns().every(function (i) {
        if (i === columns.length - 1) {
          $(api.table().footer()).find('tr').append('<th></th>');
          return;
        }
        let column = this;
        let th = $('<th><input type="text" class="form-control form-control-sm" placeholder="Search" /></th>');
        th.find('input').on('keyup change', function () {
          if (column.search() !== this.value) {
            column.search(this.value).draw();
          }
        });
        $(api.table().footer()).find('tr').append(th);
      });
    }
  });

  // Move page navigation to custom location
  function movePagination() {
    let paginate = $('#' + tableId + '_paginate');
    $(paginateSelector).empty().append(paginate);
    paginate.css('display', 'flex');
  }
  table.on('draw', movePagination);
  movePagination();

  // Hide global search
  $('#' + tableId + '_filter').hide();

  // Row delete
  $('#' + tableId + ' tbody').on('click', '.delete-row', function () {
    table.row($(this).parents('tr')).remove().draw();
  });

  // Render column visibility button manually
  table.buttons().container().appendTo('#' + tableId + '_wrapper .col-md-6:eq(0)');

  // Move entries dropdown and info area to lower left
  $('#' + tableId + '_length, #' + tableId + '_info').wrapAll('<div style="position:relative;height:3em;"></div>');
  $('#' + tableId + '_info').css('top', '2em');
}

$(document).ready(function() {
  initTable("datatable1", "#custom-paginate-1");
  initTable("datatable2", "#custom-paginate-2");
});
</script>
</body>
</html>
